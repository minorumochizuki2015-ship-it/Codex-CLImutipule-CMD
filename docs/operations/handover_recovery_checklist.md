# 引継ぎ・復旧チェックリスト

作業の中断やトラブル、コンテキスト圧縮による情報欠落に備え、以下の手順で状況を復元してください。新規参加者や別担当へ引き継ぐ際もこの手順に従います。

## 1. 現在の計画とログを確認
1. `diff-plan.json` を開き、進行中ステップと未処理タスクを確認。
2. `cmd報告書-AUDIT.txt` / `cmd報告書-WORKー.txt` に直近の実行日時・コマンド・ハッシュが記録されているか確認。
3. `AUIDIT監査報告.txt` の最新指示を読み、未対応の監査アクションがないか把握。

## 2. 作業ディレクトリの状態を把握
1. `docs/operations/root_structure_filerule.md` を読み、最新の配置ルールを確認。
2. `git status -sb` を実行し、未追跡ファイルや変更済みファイルを把握（削除は禁止。変更は報告書へ記録）。
3. `.venv\Scripts\python.exe -m pytest -q --maxfail=1` を Dry-Run で確認し、依存が欠けていないかチェック。

## 3. バックアップと監査証跡
1. 取得済みバックアップは `backups/` 配下に格納されている。`README.md` の手順で SHA256 を確認し、対象データを抽出。
2. 監査関連スクリプトは `scripts/mail_lightning_audit.py` 等に集約されている。実行時は Dry-Run→Apply→検証の順番を守り、ログを `data/logs/current/` または `observability/` に保存。
3. 追加で取得したログや証跡は必ず `cmd報告書-*.txt` に記録し、他メンバーが追跡できるようにする。

## 4. 未完タスクの再開手順
1. `diff-plan.json` の未完ステップに対応するディレクトリ／ファイルを開く。
2. 該当スクリプトやドキュメントを `git diff` で確認し、最後の変更内容と TODO を把握。
3. 必要に応じて `docs/operations/` 配下に再開メモを残す（日本語で簡潔に）。

## 5. 引継ぎ時に必ず渡す情報
- 最新の `diff-plan.json`（作業ステータス付き）
- `cmd報告書-AUDIT.txt` および `cmd報告書-WORKー.txt` の更新日時と該当セクション
- 参照するバックアップ／スクリーンショットのパス（`backups/`, `screenshots/`）
- 実行予定／保留中のテストコマンド

## 6. 再発防止の記録
- トラブル発生時は原因と対策を `docs/operations/` に追加し、ハッシュ値を報告書に記録。
- 重大インシデントは `observability/` 配下に再発防止メモとログを保存し、Slack/メール等必要なチャネルで共有。

---
本チェックリストを更新した場合は `cmd報告書-AUDIT.txt` に変更点と SHA256 を追記し、誰でも復旧手順を辿れる状態を維持してください。
